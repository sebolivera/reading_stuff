{% extends 'base.html' %} 
{% load static %}
{% block additional_head %}
{% endblock %}
{% block content %}
<div class="container">
  <div class="row shadow-none">
{% if request.COOKIES.site_color_mode and request.COOKIES.site_color_mode == "dark" %}
    <div class="col-md-8 card mb-4  mt-3 left top shadow-none text-light bg-dark shadow-lg">
{% else %}
    <div class="col-md-8 card mb-4  mt-3 left top shadow-none text-light bg-light shadow-lg">
{% endif %}
      <div class="card-body">
        {% if request.COOKIES.site_color_mode and request.COOKIES.site_color_mode == "dark" %}
        <h1 class="text-light">New post</h1>
        {% else %}
        <h1 class="text-dark">New post</h1>
        {% endif %}
        <form method="post" method="POST">
            <div class="container mb-3">
            {% if request.COOKIES.site_color_mode and request.COOKIES.site_color_mode == "dark" %}
            <span class="text-light">{{ form.title.label }}: </span><input class="bg-dark text-light" type="text" name="title" maxlength="254" required="" id="id_title">
            {% else %}
            <span class="text-dark">{{ form.title.label }}: <input class="bg-light text-dark" type="text" name="title" maxlength="254" required="" id="id_title">
            {% endif %}
            </div>
                {% if books %}
                    <div class="align-middle container mb-3">
                        <input class="form-check-input" type="checkbox" id="ischapter" value="option1" name="ischapter"/>
                        <label class="form-check-label" for="inlineCheckbox1">This is a chapter (and not a simple post)</label>
                    </div>
                    <div class="book-info align-middle"> 
                        <div class="container mb-3">
                            <label for="book">Book:</label>
                            <select name="book" id="book">
                                <option value="">---</option>
                                {% for book in books %}
                                    <option value="{{book}}">{{book.title}}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="container mb-3">
                            <label for="position">Chapter Number: &nbsp;</label>
                            {% if request.COOKIES.site_color_mode and request.COOKIES.site_color_mode == "dark" %}
                            {{ form.title.label }}: 
                            <input class="bg-dark text-light" type="text" name="position" id="position" placeholder="Ex: 1.1, 3, B"></input>
                            {% else %}
                            {{ form.title.label }}:
                            <input class="bg-light text-dark" type="text" name="position" id="position" placeholder="Ex: 1.1, 3, B"></input>
                            {% endif %}
                            <p class="text-danger book-select-error">Please select a book!</p>
                        </div>
                    </div>
                    <script type="text/javascript" src="{% static 'js/chapterinfo.js' %}"></script>
                {% endif %}
            <div class="container mb-3">
                {{ form.content }}
            </div>
            {% csrf_token %}
            <br/>
            <button type="submit" name="publish" class="btn btn-primary  btn-lg" value="publish">Publish</button>
            <button type="submit" name="save" class="btn btn-primary  btn-lg" value="save">Save as a draft</button>
        </form>
      </div>
    </div>
    {% block sidebar %} {% include 'sidebar_nosearch.html' %} {% endblock sidebar %}
  </div>
</div>
{% endblock content %}